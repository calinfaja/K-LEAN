{
  "project": {
    "name": "k-lean",
    "version": "1.0.0-beta",
    "description": "Multi-model code review and knowledge capture system for Claude Code",
    "generated": "2025-12-29",
    "python_version": ">=3.9",
    "license": "Apache-2.0"
  },
  "entry_points": {
    "k-lean": "src/klean/cli.py:main",
    "smol-kln": "src/klean/smol/cli.py:main"
  },
  "core_modules": {
    "cli": {
      "path": "src/klean/cli.py",
      "exports": ["main", "install", "status", "doctor", "start", "stop", "models", "multi", "setup"],
      "purpose": "Primary CLI with Click commands"
    },
    "discovery": {
      "path": "src/klean/discovery.py",
      "exports": ["list_models", "get_model", "is_available", "clear_cache"],
      "purpose": "Dynamic model discovery from LiteLLM proxy"
    },
    "klean_core": {
      "path": "src/klean/data/core/klean_core.py",
      "exports": ["LLMClient", "ModelResolver", "ReviewEngine", "cli_quick", "cli_multi", "cli_rethink"],
      "purpose": "Review engine for quick/multi commands"
    },
    "executor": {
      "path": "src/klean/smol/executor.py",
      "exports": ["SmolKLNExecutor"],
      "purpose": "SmolAgents-based agent execution"
    },
    "multi_agent": {
      "path": "src/klean/smol/multi_agent.py",
      "exports": ["MultiAgentExecutor"],
      "purpose": "Multi-agent orchestration"
    },
    "multi_config": {
      "path": "src/klean/smol/multi_config.py",
      "exports": ["get_3_agent_config", "get_4_agent_config", "get_models"],
      "purpose": "Agent configuration (3 or 4 agent variants)"
    },
    "loader": {
      "path": "src/klean/smol/loader.py",
      "exports": ["parse_agent_file", "load_agent", "list_available_agents", "AgentConfig", "Agent"],
      "purpose": "Agent .md file parser"
    },
    "tools": {
      "path": "src/klean/smol/tools.py",
      "exports": ["read_file", "grep", "search_files", "git_diff", "git_status", "git_log", "list_directory", "get_file_info", "get_default_tools"],
      "purpose": "Agent tools for code analysis"
    }
  },
  "slash_commands": {
    "kln:quick": {"file": "data/commands/kln/quick.md", "purpose": "Fast single-model review"},
    "kln:multi": {"file": "data/commands/kln/multi.md", "purpose": "Multi-model consensus"},
    "kln:deep": {"file": "data/commands/kln/deep.md", "purpose": "Deep codebase analysis"},
    "kln:agent": {"file": "data/commands/kln/agent.md", "purpose": "SmolKLN specialist agents"},
    "kln:rethink": {"file": "data/commands/kln/rethink.md", "purpose": "Fresh perspective debugging"},
    "kln:remember": {"file": "data/commands/kln/remember.md", "purpose": "End-of-session capture"},
    "kln:doc": {"file": "data/commands/kln/doc.md", "purpose": "Documentation generation"},
    "kln:status": {"file": "data/commands/kln/status.md", "purpose": "System status"},
    "kln:help": {"file": "data/commands/kln/help.md", "purpose": "Command reference"}
  },
  "hooks": {
    "user-prompt-handler": {"file": "data/hooks/user-prompt-handler.sh", "trigger": "UserPromptSubmit", "keywords": ["SaveThis", "FindKnowledge", "asyncReview", "asyncConsensus", "asyncDeepReview"]},
    "post-bash-handler": {"file": "data/hooks/post-bash-handler.sh", "trigger": "PostToolUse:Bash"},
    "post-web-handler": {"file": "data/hooks/post-web-handler.sh", "trigger": "PostToolUse:Web*"},
    "session-start": {"file": "data/hooks/session-start.sh", "trigger": "SessionStart"}
  },
  "agents": {
    "security-auditor": {"file": "data/agents/security-auditor.md", "specialty": "OWASP security"},
    "code-reviewer": {"file": "data/agents/code-reviewer.md", "specialty": "Code quality"},
    "debugger": {"file": "data/agents/debugger.md", "specialty": "Bug investigation"},
    "performance-engineer": {"file": "data/agents/performance-engineer.md", "specialty": "Performance"},
    "rust-expert": {"file": "data/agents/rust-expert.md", "specialty": "Rust"},
    "c-pro": {"file": "data/agents/c-pro.md", "specialty": "C/embedded"},
    "arm-cortex-expert": {"file": "data/agents/arm-cortex-expert.md", "specialty": "ARM MCU"}
  },
  "multi_agents": {
    "3_agent": ["manager", "file_scout", "analyzer"],
    "4_agent": ["manager", "file_scout", "code_analyzer", "security_auditor", "synthesizer"]
  },
  "knowledge_db": {
    "storage": ".knowledge-db/",
    "server_script": "data/scripts/knowledge-server.py",
    "search_script": "data/scripts/knowledge-search.py",
    "hybrid_search": "data/scripts/knowledge-hybrid-search.py",
    "capture_script": "data/scripts/knowledge-capture.py",
    "query_cli": "data/scripts/knowledge-query.sh"
  },
  "config_files": {
    "pyproject": "pyproject.toml",
    "klean_config": "data/config/klean-config.yaml",
    "litellm_config": "data/config/litellm/config.yaml",
    "nanogpt_template": "data/config/nanogpt.yaml",
    "openrouter_template": "data/config/litellm/openrouter.yaml"
  },
  "dependencies": {
    "core": ["click>=8.0.0", "rich>=13.0.0", "pyyaml>=6.0.0", "httpx>=0.27.0"],
    "knowledge": ["txtai>=7.0.0", "sentence-transformers>=2.0.0"],
    "smolagents": ["smolagents[litellm]>=1.17.0", "ddgs>=6.0.0", "markdownify>=0.11.0"],
    "telemetry": ["arize-phoenix>=4.0", "opentelemetry-sdk"]
  },
  "tests": {
    "framework": "pytest",
    "path": "tests/",
    "unit_tests": ["test_discovery.py", "test_loader.py", "test_context.py", "test_memory.py", "test_tools_citations.py"],
    "integration_tests": ["test_doctor_hooks.py"],
    "core_tests": "src/klean/data/core/tests/"
  },
  "file_counts": {
    "python": 43,
    "markdown": 100,
    "shell": 35,
    "yaml": 17,
    "tests": 9
  },
  "key_patterns": [
    "Dynamic model discovery from LiteLLM",
    "First-available model (user controls priority)",
    "Agent definitions: YAML frontmatter + markdown",
    "Per-project knowledge DB in .knowledge-db/",
    "Hook system for Claude Code integration"
  ]
}
