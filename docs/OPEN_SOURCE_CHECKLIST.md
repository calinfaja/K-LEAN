# K-LEAN Open Source Release Checklist

Comprehensive checklist for open source release readiness.

**Analysis Date:** 2025-12-21
**Status:**  **READY WITH FIXES**

---

## Summary

| Category | Status | Critical Issues |
|----------|--------|-----------------|
| Repository Essentials | [OK] | None |
| Python Package | [OK] | None |
| Scripts | [OK] | None (env vars with fallbacks) |
| Documentation |  | Schema inconsistency |
| Config & Hooks | [OK] | None |
| Test Suite |  | No unit tests |

---

##  CRITICAL - Must Fix Before Release

### 1. [OK] License Classifier - FIXED
**File:** `pyproject.toml` line 20 already uses `"License :: OSI Approved :: Apache Software License"`

### 2. [OK] CODE_OF_CONDUCT.md - SKIPPED
**Note:** Not required for this project

### 3. [OK] CHANGELOG Date - FIXED
**File:** `CHANGELOG.md` line 7 already uses `2025-12-21`

### 4. Knowledge DB Schema Mismatch
**Files:**
- `docs/reference.md` - Shows 7 fields
- `.agents/knowledge-db.md` - Shows 10+ fields

**Fix:** Reconcile to match actual implementation

### 5. [WARN] Repository URL - PARTIALLY FIXED
**Status:**
- [OK] `pyproject.toml` - Correct: `https://github.com/calinfaja/k-lean`
- [OK] `.agents/development.md` - Correct: `https://github.com/calinfaja/k-lean.git`
- [X] `.git/config` - Still uses old URL (update with `git remote set-url origin`)

---

##  IMPORTANT - Should Fix Before Release

### 6. [OK] /tmp Paths - FIXED
**Status:** All scripts now use environment variables with /tmp fallback:
- `knowledge-server.py:31` - Uses `KLEAN_SOCKET_DIR` env var
- `knowledge-events.py:33` - Uses `KLEAN_SOCKET_DIR` env var
- `consensus-review.sh:89` - Uses `TMPDIR` with /tmp fallback
- `kb-doctor.sh:272` - Uses `KLEAN_SOCKET_DIR` with /tmp fallback

### 7. Empty Test Suite
**Issue:** `tests/` directory exists but is empty

**Recommendation:**
- Add basic unit tests for CLI commands
- Add tests for core functionality
- Target 60%+ coverage

### 8. Minimal CI/CD Pipeline
**File:** `.github/workflows/ci.yml`

**Missing:**
- pytest execution
- Code coverage
- Linting (ruff, black)
- Multi-Python version testing (3.9, 3.10, 3.11, 3.12)

### 9. Missing QA Reference in Docs
**Action:** Add reference to `docs/agentic_manual_QA.md` in `docs/README.md`

---

## [OK] VERIFIED - Ready for Release

### Repository Essentials
- [x] LICENSE - Apache 2.0, properly formatted
- [x] README.md - Complete with all sections
- [x] CONTRIBUTING.md - Comprehensive guidelines
- [x] .gitignore - Excludes all sensitive files
- [x] No hardcoded secrets in codebase
- [x] No real API keys exposed

### Python Package
- [x] pyproject.toml metadata complete
- [x] Version consistent (1.0.0-beta in __init__.py and pyproject.toml)
- [x] No hardcoded user paths in src/klean/
- [x] CLI entry point correctly defined
- [x] No TODO/FIXME/HACK comments
- [x] Dependencies properly declared

### Config & Hooks
- [x] No real API keys in config files
- [x] .env files in .gitignore
- [x] Only .env.example tracked
- [x] Hooks use environment variables
- [x] All 9 slash commands present
- [x] All 8 SmolKLN agents present

### Documentation
- [x] docs/ folder structure complete
- [x] .agents/ technical docs comprehensive
- [x] All internal links valid
- [x] Installation instructions functional
- [x] Command counts accurate (9 commands, 8 agents, 4 hooks)

### Security
- [x] No passwords or tokens
- [x] No private endpoints
- [x] API keys use environment variables
- [x] .env files properly ignored
- [x] No credentials in git history

---

## Quick Fix Commands

```bash
# 1. Update git remote URL (if needed)
git remote set-url origin https://github.com/calinfaja/k-lean.git

# 2. Verify all fixes
kln doctor
```

---

## Release Procedure

1. [ ] Fix all  CRITICAL issues above
2. [ ] Fix  IMPORTANT issues (recommended)
3. [ ] Run `kln sync` to sync package data
4. [ ] Run `kln test` to verify installation
5. [ ] Build package: `python -m build`
6. [ ] Test install: `pipx install dist/*.whl`
7. [ ] Create GitHub release with tag `v1.0.0-beta`
8. [ ] Publish to PyPI: `twine upload dist/*`

---

## Post-Release

- [ ] Announce release
- [ ] Monitor GitHub issues
- [ ] Set up GitHub Discussions
- [ ] Add badges to README (PyPI, downloads, etc.)

---

*Generated by K-LEAN Open Source Analysis*
